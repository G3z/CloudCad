<!DOCTYPE html>  <html> <head>   <title>Camera.coffee</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="AbstractView.html">                 AbstractView.coffee               </a>                                           <a class="source" href="Camera.html">                 Camera.coffee               </a>                                           <a class="source" href="CameraController.html">                 CameraController.coffee               </a>                                           <a class="source" href="Keyboard.html">                 Keyboard.coffee               </a>                                           <a class="source" href="Mouse.html">                 Mouse.coffee               </a>                                           <a class="source" href="MouseButton.html">                 MouseButton.coffee               </a>                                           <a class="source" href="MouseWheel.html">                 MouseWheel.coffee               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               Camera.coffee             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>                            </td>             <td class="code">               <div class="highlight"><pre><span class="k">class</span> <span class="nx">CC</span><span class="p">.</span><span class="nx">views</span><span class="p">.</span><span class="nx">draw</span><span class="p">.</span><span class="nx">Camera</span> <span class="k">extends</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Camera</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>constructor: (angle, ratio, nearClipDist, farClipDist)->
   super(angle,ratio,nearClipDist,farClipDist)</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="n-Method">constructor:</span><span class="nf">(width, height,fov,pNear,pFar, oNear, oFar)-&gt;</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>@threeCamera = new THREE.CombinedCamera(left, right,fov,pNear,pFar, oNear, oFar)</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="vi">@perspective = </span><span class="kc">true</span>
        <span class="nx">THREE</span><span class="p">.</span><span class="nx">Camera</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>

        <span class="vi">@cameraO = </span><span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">OrthographicCamera</span><span class="p">(</span> <span class="nx">width</span> <span class="sr">/ - 2, width /</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">height</span> <span class="sr">/ 2, height /</span> <span class="o">-</span> <span class="mi">2</span><span class="p">,</span>  <span class="nx">oNear</span><span class="p">,</span> <span class="nx">oFar</span> <span class="p">);</span>
        <span class="vi">@cameraP = </span><span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">PerspectiveCamera</span><span class="p">(</span> <span class="nx">fov</span><span class="p">,</span> <span class="nx">width</span><span class="o">/</span><span class="nx">height</span><span class="p">,</span> <span class="nx">pNear</span><span class="p">,</span> <span class="nx">pFar</span> <span class="p">);</span>

        <span class="nx">@toPerspective</span><span class="p">()</span>
    
    <span class="n-Method">toPerspective:</span><span class="o">=&gt;</span>
        <span class="vi">@near = </span><span class="nx">@cameraP</span><span class="p">.</span><span class="nx">near</span>
        <span class="vi">@far = </span><span class="nx">@cameraP</span><span class="p">.</span><span class="nx">far</span>
        <span class="vi">@projectionMatrix = </span><span class="nx">@cameraP</span><span class="p">.</span><span class="nx">projectionMatrix</span>
    
    <span class="n-Method">toOrthographic:</span><span class="o">=&gt;</span>
        <span class="vi">@near = </span><span class="nx">@cameraO</span><span class="p">.</span><span class="nx">near</span>
        <span class="vi">@far = </span><span class="nx">@cameraO</span><span class="p">.</span><span class="nx">far</span>
        <span class="vi">@projectionMatrix = </span><span class="nx">@cameraO</span><span class="p">.</span><span class="nx">projectionMatrix</span>
    
    <span class="n-Method">setFov:</span><span class="nf">(fov)=&gt;</span>
        <span class="vi">@cameraP.fov = </span><span class="nx">fov</span>
        <span class="nx">@cameraP</span><span class="p">.</span><span class="nx">updateProjectionMatrix</span><span class="p">()</span>
        <span class="nx">@toPerspective</span><span class="p">()</span>
    
    <span class="n-Method">setLens:</span><span class="nf">(focalLength, framesize = 43.25)=&gt;</span>  <span class="c1"># 36x24mm</span>

        <span class="nv">fov = </span><span class="mi">2</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">atan</span><span class="p">(</span> <span class="nx">framesize</span> <span class="o">/</span> <span class="p">(</span><span class="nx">focalLength</span> <span class="o">*</span> <span class="mi">2</span><span class="p">))</span>
        <span class="nv">fov = </span><span class="mi">180</span> <span class="o">/</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">*</span> <span class="nx">fov</span>
        <span class="nx">@setFov</span><span class="p">(</span><span class="nx">fov</span><span class="p">)</span>

        <span class="k">return</span> <span class="nx">fov</span><span class="p">;</span>


    <span class="n-Method">toggleType:</span><span class="o">-&gt;</span>
        <span class="k">if</span> <span class="nx">@perspective</span>
            <span class="nx">@toOrthographic</span><span class="p">()</span>
            <span class="vi">@perspective = </span><span class="kc">false</span>
        <span class="k">else</span>
            <span class="nx">@toPerspective</span><span class="p">()</span>
            <span class="vi">@perspective = </span><span class="kc">true</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 